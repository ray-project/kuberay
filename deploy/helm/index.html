
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ray-project.github.io/kuberay/deploy/helm/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>kuberay-operator - KubeRay Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kuberay-operator" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="KubeRay Docs" class="md-header__button md-logo" aria-label="KubeRay Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KubeRay Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              kuberay-operator
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ray-project/kuberay" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ray-project/kuberay
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Home

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="KubeRay Docs" class="md-nav__button md-logo" aria-label="KubeRay Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    KubeRay Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ray-project/kuberay" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ray-project/kuberay
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Home
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-crds-and-kuberay-operator" class="md-nav__link">
    <span class="md-ellipsis">
      Install CRDs and KubeRay operator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-the-chart" class="md-nav__link">
    <span class="md-ellipsis">
      List the chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstall-the-chart" class="md-nav__link">
    <span class="md-ellipsis">
      Uninstall the Chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-argo-cd" class="md-nav__link">
    <span class="md-ellipsis">
      Working with Argo CD
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#values" class="md-nav__link">
    <span class="md-ellipsis">
      Values
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="kuberay-operator">kuberay-operator<a class="headerlink" href="#kuberay-operator" title="Permanent link">&para;</a></h1>
<p><img alt="Version: 1.1.0" src="https://img.shields.io/badge/Version-1.1.0-informational?style=flat-square" /> <img alt="Type: application" src="https://img.shields.io/badge/Type-application-informational?style=flat-square" /></p>
<p>A Helm chart for deploying the Kuberay operator on Kubernetes.</p>
<p><strong>Homepage:</strong> <a href="https://github.com/ray-project/kuberay">https://github.com/ray-project/kuberay</a></p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>This document provides instructions to install both CRDs (RayCluster, RayJob, RayService) and
KubeRay operator with a Helm chart.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://kubernetes.io">Kubernetes</a></li>
<li><a href="https://helm.sh">Helm</a> &gt;= 3</li>
</ul>
<p>Make sure the version of Helm is v3+. Currently, <a href="https://github.com/ray-project/kuberay/blob/master/.github/workflows/helm.yaml">existing CI tests</a> are based on Helm v3.4.1 and v3.9.4.</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>version
</code></pre></div>
<h2 id="install-crds-and-kuberay-operator">Install CRDs and KubeRay operator<a class="headerlink" href="#install-crds-and-kuberay-operator" title="Permanent link">&para;</a></h2>
<ul>
<li>Install a stable version via Helm repository (only supports KubeRay v0.4.0+)</li>
</ul>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>kuberay<span class="w"> </span>https://ray-project.github.io/kuberay-helm/

<span class="c1"># Install both CRDs and KubeRay operator v1.1.0.</span>
helm<span class="w"> </span>install<span class="w"> </span>kuberay-operator<span class="w"> </span>kuberay/kuberay-operator<span class="w"> </span>--version<span class="w"> </span><span class="m">1</span>.1.0

<span class="c1"># Check the KubeRay operator Pod in `default` namespace</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods
<span class="c1"># NAME                                READY   STATUS    RESTARTS   AGE</span>
<span class="c1"># kuberay-operator-6fcbb94f64-mbfnr   1/1     Running   0          17s</span>
</code></pre></div>
<ul>
<li>Install the nightly version</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Step1: Clone KubeRay repository</span>

<span class="c1"># Step2: Move to `helm-chart/kuberay-operator`</span>

<span class="c1"># Step3: Install KubeRay operator</span>
helm<span class="w"> </span>install<span class="w"> </span>kuberay-operator<span class="w"> </span>.
</code></pre></div>
<ul>
<li>Install KubeRay operator without installing CRDs</li>
<li>In some cases, the installation of the CRDs and the installation of the operator may require
    different levels of admin permissions, so these two installations could be handled as different
    steps by different roles.</li>
<li>Use Helm's built-in <code>--skip-crds</code> flag to install the operator only.
    See <a href="https://helm.sh/docs/chart_best_practices/custom_resource_definitions/">this document</a> for more details.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Step 1: Install CRDs only (for cluster admin)</span>
kubectl<span class="w"> </span>create<span class="w"> </span>-k<span class="w"> </span><span class="s2">&quot;github.com/ray-project/kuberay/ray-operator/config/crd?ref=v1.1.0&amp;timeout=90s&quot;</span>

<span class="c1"># Step 2: Install KubeRay operator only. (for developer)</span>
helm<span class="w"> </span>install<span class="w"> </span>kuberay-operator<span class="w"> </span>kuberay/kuberay-operator<span class="w"> </span>--version<span class="w"> </span><span class="m">1</span>.1.0<span class="w"> </span>--skip-crds
</code></pre></div>
<h2 id="list-the-chart">List the chart<a class="headerlink" href="#list-the-chart" title="Permanent link">&para;</a></h2>
<p>To list the <code>my-release</code> deployment:</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>ls
<span class="c1"># NAME                    NAMESPACE       REVISION        UPDATED                                 STATUS          CHART                           APP VERSION</span>
<span class="c1"># kuberay-operator        default         1               2023-09-22 02:57:17.306616331 +0000 UTC deployed        kuberay-operator-1.1.0</span>
</code></pre></div>
<h2 id="uninstall-the-chart">Uninstall the Chart<a class="headerlink" href="#uninstall-the-chart" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># Uninstall the `kuberay-operator` release</span>
helm<span class="w"> </span>uninstall<span class="w"> </span>kuberay-operator

<span class="c1"># The operator Pod should be removed.</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods
<span class="c1"># No resources found in default namespace.</span>
</code></pre></div>
<h2 id="working-with-argo-cd">Working with Argo CD<a class="headerlink" href="#working-with-argo-cd" title="Permanent link">&para;</a></h2>
<p>If you are using <a href="https://argoproj.github.io">Argo CD</a> to manage the operator, you will encounter the issue which complains the
CRDs too long. Same with <a href="https://github.com/prometheus-operator/prometheus-operator/issues/4439">this issue</a>. The recommended solution is to split the operator into two
Argo apps, such as:</p>
<ul>
<li>The first app just for installing the CRDs with <code>Replace=true</code> directly, snippet:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray-operator-crds</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">repoURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/ray-project/kuberay</span>
<span class="w">    </span><span class="nt">targetRevision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.0.0-rc.0</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">helm-chart/kuberay-operator/crds</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
<span class="w">  </span><span class="nt">syncPolicy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">syncOptions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Replace=true</span>
<span class="nn">...</span>
</code></pre></div>
<ul>
<li>The second app that installs the Helm chart with <code>skipCrds=true</code> (new feature in Argo CD 2.3.0), snippet:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray-operator</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">repoURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/ray-project/kuberay</span>
<span class="w">    </span><span class="nt">targetRevision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.0.0-rc.0</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">helm-chart/kuberay-operator</span>
<span class="w">    </span><span class="nt">helm</span><span class="p">:</span>
<span class="w">      </span><span class="nt">skipCrds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray-operator</span>
<span class="w">  </span><span class="nt">syncPolicy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">syncOptions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CreateNamespace=true</span>
<span class="nn">...</span>
</code></pre></div>
<h2 id="values">Values<a class="headerlink" href="#values" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>nameOverride</td>
<td>string</td>
<td><code>"kuberay-operator"</code></td>
<td>String to partially override release name.</td>
</tr>
<tr>
<td>fullnameOverride</td>
<td>string</td>
<td><code>"kuberay-operator"</code></td>
<td>String to fully override release name.</td>
</tr>
<tr>
<td>componentOverride</td>
<td>string</td>
<td><code>"kuberay-operator"</code></td>
<td>String to override component name.</td>
</tr>
<tr>
<td>replicas</td>
<td>int</td>
<td><code>1</code></td>
<td>Number of replicas for the KubeRay operator Deployment.</td>
</tr>
<tr>
<td>image.repository</td>
<td>string</td>
<td><code>"quay.io/kuberay/operator"</code></td>
<td>Image repository.</td>
</tr>
<tr>
<td>image.tag</td>
<td>string</td>
<td><code>"nightly"</code></td>
<td>Image tag.</td>
</tr>
<tr>
<td>image.pullPolicy</td>
<td>string</td>
<td><code>"IfNotPresent"</code></td>
<td>Image pull policy.</td>
</tr>
<tr>
<td>imagePullSecrets</td>
<td>list</td>
<td><code>[]</code></td>
<td>Secrets with credentials to pull images from a private registry</td>
</tr>
<tr>
<td>nodeSelector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Restrict to run on particular nodes.</td>
</tr>
<tr>
<td>priorityClassName</td>
<td>string</td>
<td><code>""</code></td>
<td>Pod priorityClassName</td>
</tr>
<tr>
<td>labels</td>
<td>object</td>
<td><code>{}</code></td>
<td>Extra labels.</td>
</tr>
<tr>
<td>annotations</td>
<td>object</td>
<td><code>{}</code></td>
<td>Extra annotations.</td>
</tr>
<tr>
<td>affinity</td>
<td>object</td>
<td><code>{}</code></td>
<td>Pod affinity</td>
</tr>
<tr>
<td>tolerations</td>
<td>list</td>
<td><code>[]</code></td>
<td>Pod tolerations</td>
</tr>
<tr>
<td>serviceAccount.create</td>
<td>bool</td>
<td><code>true</code></td>
<td>Specifies whether a service account should be created.</td>
</tr>
<tr>
<td>serviceAccount.name</td>
<td>string</td>
<td><code>"kuberay-operator"</code></td>
<td>The name of the service account to use. If not set and create is true, a name is generated using the fullname template.</td>
</tr>
<tr>
<td>logging.stdoutEncoder</td>
<td>string</td>
<td><code>"json"</code></td>
<td>Log encoder to use for stdout (one of <code>json</code> or <code>console</code>).</td>
</tr>
<tr>
<td>logging.fileEncoder</td>
<td>string</td>
<td><code>"json"</code></td>
<td>Log encoder to use for file logging (one of <code>json</code> or <code>console</code>).</td>
</tr>
<tr>
<td>logging.baseDir</td>
<td>string</td>
<td><code>""</code></td>
<td>Directory for kuberay-operator log file.</td>
</tr>
<tr>
<td>logging.fileName</td>
<td>string</td>
<td><code>""</code></td>
<td>File name for kuberay-operator log file.</td>
</tr>
<tr>
<td>logging.sizeLimit</td>
<td>string</td>
<td><code>""</code></td>
<td>EmptyDir volume size limit for kuberay-operator log file.</td>
</tr>
<tr>
<td>batchScheduler.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td></td>
</tr>
<tr>
<td>batchScheduler.name</td>
<td>string</td>
<td><code>""</code></td>
<td></td>
</tr>
<tr>
<td>configuration.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Whether to enable the configuration feature. If enabled, a ConfigMap will be created and mounted to the operator. When enabled, flag-based configuration values (leaderElectionEnabled, metrics.enabled, kubeClient.qps, etc.) will be injected into the ConfigMap. The operator will use the ConfigMap and ignore command-line flags.</td>
</tr>
<tr>
<td>configuration.defaultContainerEnvs</td>
<td>list</td>
<td><code>[]</code></td>
<td>Default environment variables to inject into all Ray containers in all RayCluster CRs. This allows user to set feature flags across all Ray pods. Example: defaultContainerEnvs: - name: RAY_enable_open_telemetry   value: "true" - name: RAY_metric_cardinality_level   value: "recommended"</td>
</tr>
<tr>
<td>configuration.headSidecarContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Sidecar containers to inject into every Ray head pod. Example: headSidecarContainers: - name: fluentbit   image: fluent/fluent-bit:1.9</td>
</tr>
<tr>
<td>configuration.workerSidecarContainers</td>
<td>list</td>
<td><code>[]</code></td>
<td>Sidecar containers to inject into every Ray worker pod. Example: workerSidecarContainers: - name: fluentbit   image: fluent/fluent-bit:1.9</td>
</tr>
<tr>
<td>featureGates[0].name</td>
<td>string</td>
<td><code>"RayClusterStatusConditions"</code></td>
<td></td>
</tr>
<tr>
<td>featureGates[0].enabled</td>
<td>bool</td>
<td><code>true</code></td>
<td></td>
</tr>
<tr>
<td>featureGates[1].name</td>
<td>string</td>
<td><code>"RayJobDeletionPolicy"</code></td>
<td></td>
</tr>
<tr>
<td>featureGates[1].enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td></td>
</tr>
<tr>
<td>featureGates[2].name</td>
<td>string</td>
<td><code>"RayMultiHostIndexing"</code></td>
<td></td>
</tr>
<tr>
<td>featureGates[2].enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td></td>
</tr>
<tr>
<td>featureGates[3].name</td>
<td>string</td>
<td><code>"RayServiceIncrementalUpgrade"</code></td>
<td></td>
</tr>
<tr>
<td>featureGates[3].enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td></td>
</tr>
<tr>
<td>metrics.enabled</td>
<td>bool</td>
<td><code>true</code></td>
<td>Whether KubeRay operator should emit control plane metrics.</td>
</tr>
<tr>
<td>metrics.serviceMonitor.enabled</td>
<td>bool</td>
<td><code>false</code></td>
<td>Enable a prometheus ServiceMonitor</td>
</tr>
<tr>
<td>metrics.serviceMonitor.interval</td>
<td>string</td>
<td><code>"30s"</code></td>
<td>Prometheus ServiceMonitor interval</td>
</tr>
<tr>
<td>metrics.serviceMonitor.honorLabels</td>
<td>bool</td>
<td><code>true</code></td>
<td>When true, honorLabels preserves the metric’s labels when they collide with the target’s labels.</td>
</tr>
<tr>
<td>metrics.serviceMonitor.selector</td>
<td>object</td>
<td><code>{}</code></td>
<td>Prometheus ServiceMonitor selector</td>
</tr>
<tr>
<td>metrics.serviceMonitor.namespace</td>
<td>string</td>
<td><code>""</code></td>
<td>Prometheus ServiceMonitor namespace</td>
</tr>
<tr>
<td>operatorCommand</td>
<td>string</td>
<td><code>"/manager"</code></td>
<td>Path to the operator binary</td>
</tr>
<tr>
<td>leaderElectionEnabled</td>
<td>bool</td>
<td><code>true</code></td>
<td>If leaderElectionEnabled is set to true, the KubeRay operator will use leader election for high availability.</td>
</tr>
<tr>
<td>reconcileConcurrency</td>
<td>int</td>
<td><code>1</code></td>
<td>The maximum number of reconcile operations that can be performed simultaneously. This setting controls the concurrency of the controller reconciliation loops. Higher values can improve throughput in clusters with many resources, but may increase resource consumption.</td>
</tr>
<tr>
<td>kubeClient</td>
<td>object</td>
<td><code>{"burst":200,"qps":100}</code></td>
<td>Kube Client configuration for QPS and burst settings. This setting controls the QPS and burst rate of the kube client when sending requests to the Kubernetes API server. If the QPS and burst values are too low, we may easily hit rate limits on the API server and slow down the controller reconciliation loops.</td>
</tr>
<tr>
<td>kubeClient.qps</td>
<td>float</td>
<td><code>100</code></td>
<td>The QPS value for the client communicating with the Kubernetes API server. Must be a float number.</td>
</tr>
<tr>
<td>kubeClient.burst</td>
<td>int</td>
<td><code>200</code></td>
<td>The maximum burst for throttling requests from this client to the Kubernetes API server. Must be a non-negative integer.</td>
</tr>
<tr>
<td>rbacEnable</td>
<td>bool</td>
<td><code>true</code></td>
<td>If rbacEnable is set to false, no RBAC resources will be created, including the Role for leader election, the Role for Pods and Services, and so on.</td>
</tr>
<tr>
<td>crNamespacedRbacEnable</td>
<td>bool</td>
<td><code>true</code></td>
<td>When crNamespacedRbacEnable is set to true, the KubeRay operator will create a Role for RayCluster preparation (e.g., Pods, Services) and a corresponding RoleBinding for each namespace listed in the "watchNamespace" parameter. Please note that even if crNamespacedRbacEnable is set to false, the Role and RoleBinding for leader election will still be created.  Note: (1) This variable is only effective when rbacEnable and singleNamespaceInstall are both set to true. (2) In most cases, it should be set to true, unless you are using a Kubernetes cluster managed by GitOps tools such as ArgoCD.</td>
</tr>
<tr>
<td>singleNamespaceInstall</td>
<td>bool</td>
<td><code>false</code></td>
<td>When singleNamespaceInstall is true: - Install namespaced RBAC resources such as Role and RoleBinding instead of cluster-scoped ones like ClusterRole and ClusterRoleBinding so that   the chart can be installed by users with permissions restricted to a single namespace.   (Please note that this excludes the CRDs, which can only be installed at the cluster scope.) - If "watchNamespace" is not set, the KubeRay operator will, by default, only listen   to resource events within its own namespace.</td>
</tr>
<tr>
<td>env</td>
<td>string</td>
<td><code>nil</code></td>
<td>Environment variables.</td>
</tr>
<tr>
<td>resources</td>
<td>object</td>
<td><code>{"limits":{"cpu":"100m","memory":"512Mi"}}</code></td>
<td>Resource requests and limits for containers.</td>
</tr>
<tr>
<td>livenessProbe.initialDelaySeconds</td>
<td>int</td>
<td><code>10</code></td>
<td></td>
</tr>
<tr>
<td>livenessProbe.periodSeconds</td>
<td>int</td>
<td><code>5</code></td>
<td></td>
</tr>
<tr>
<td>livenessProbe.failureThreshold</td>
<td>int</td>
<td><code>5</code></td>
<td></td>
</tr>
<tr>
<td>readinessProbe.initialDelaySeconds</td>
<td>int</td>
<td><code>10</code></td>
<td></td>
</tr>
<tr>
<td>readinessProbe.periodSeconds</td>
<td>int</td>
<td><code>5</code></td>
<td></td>
</tr>
<tr>
<td>readinessProbe.failureThreshold</td>
<td>int</td>
<td><code>5</code></td>
<td></td>
</tr>
<tr>
<td>podSecurityContext</td>
<td>object</td>
<td><code>{}</code></td>
<td>Set up <code>securityContext</code> to improve Pod security.</td>
</tr>
<tr>
<td>service.type</td>
<td>string</td>
<td><code>"ClusterIP"</code></td>
<td>Service type.</td>
</tr>
<tr>
<td>service.port</td>
<td>int</td>
<td><code>8080</code></td>
<td>Service port.</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>